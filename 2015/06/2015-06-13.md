## Performance

### [Supercharging page load (100 Days of Google Dev)](https://www.youtube.com/watch?v=d5_6yHixpsQ)

1. Serve basic contents with static HTML, and mark `<script>`s `async`
2. Inline the basic styles, and load other CSS with JS asynchronously e.g. using [loadCSS](https://github.com/filamentgroup/loadCSS).

  A quick example:

  ```html
  <script>
    function loadCSS() { ... }
    function onloadCSS() { ... }
  </script>

  <main class="article" style="display:none">
    <!-- Contents -->

    <!-- Use JS to load CSS -->
    <script>
      onloadCSS(loadCSS('style.css'), function() {
        document.querySelector('.article').style.display = '';
      });
    </script>

    <!-- Fallback for browsers without JS -->
    <!-- Just let the browser load it -->
    <noscript>
      <link rel="stylesheet" href="style.css">
    </noscript>
  </main>
  ```
3. Use chunk-encoding/multiple data frames. **Stream** your contents retrieved by Ajax!
4. Take control of cache and offline(*lie-fi*) behaviors by using **service workers**.
  * Use [the Streaming API](https://streams.spec.whatwg.org/) and [the Fetch API](https://fetch.spec.whatwg.org/) to take control of your Ajax calls again. Buffer readers will come to rescue!
5. Let the user decide whether they want to **cache contents**!
  * Remeber to check for updates

#### Reference

* [The offline cookbook](http://jakearchibald.com/2014/offline-cookbook/)
* [jakearchibald/offline-wikipedia](https://github.com/jakearchibald/offline-wikipedia)
* [GoogleChrome/ioweb2015](https://github.com/GoogleChrome/ioweb2015)
